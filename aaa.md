利用 Cursor 开发网站 sitemap 更新监控机器人

大家在做出海开发的时候，最开始都接触了游戏站的开发。最近在飞哥群里看到其它小伙伴分享的 sitemap 监控机器人，我在此基础上改造了一版，先给大家看下实现效果。

【图片占位：效果演示截图】

## 一、为啥要监控 sitemap

做游戏站的比的就是谁能最快发现新游戏，然后快速上站，如何快速发现新游戏，除了从社交媒体获取，另外一种方式就是监听各大流行的游戏网站的 sitemap.xml 文件是否有更新，当新游戏上线后，会更新网站的 sitemap.xml 文件。

通过机器人，可以代替人工，实现一次性监听几百个游戏网站有没有更新。本次利用 Cursor 开发了一个基于 Cloudflare Workers 的智能网站监控机器人，自动监控多个网站的 sitemap 变化，并通过 Telegram/Discord 推送更新通知。

【图片占位：sitemap 文件示意图】

## 二、核心功能

- **零成本部署**：基于 Cloudflare Workers，完全免费
- **智能监控**：自动检测 sitemap 变化，并支持 .gz 压缩文件格式
- **静默模式**：只在有更新时发送通知，避免消息轰炸
- **多平台支持**：Telegram 和 Discord 双平台
  
【图片占位：原理流程图】

## 三、实现原理

1. **定时任务**：机器人会定时（如每小时）抓取目标网站的 sitemap.xml 文件。
2. **内容对比**：每次抓取后，将最新的 sitemap 内容与上一次做对比，判断是否有新增或变动。
3. **变更通知**：一旦发现有更新，机器人会通过消息推送（如Telegram、Discord等）第一时间通知你，确保不错过任何新游戏上线。

【图片占位：原理流程图】

## 四、上手指南

### 1. 前置准备

- 注册 Cloudflare 账号
- 准备好 Node.js 环境
- 获取 Telegram Bot Token（如需推送到 Telegram，可选）

【图片占位：Cloudflare 注册/配置截图】

### 2. 快速部署
  
大家访问项目源码地址：https://github.com/Yangjia23/sitemap-diff, 里面手把手教大家一步一步搭建了，有不清楚的地方可以留意提问  

【图片占位：部署流程截图】


### 4. sitemap 管理与互动

- 在 Telegram 机器人中，你可以通过以下命令管理和查看监控的 sitemap：
  - `/rss add <sitemap链接>`  添加新的 sitemap 监控
  - `/rss list`  查看当前所有监控的 sitemap 列表
  - `/rss del <sitemap链接>`  删除某个 sitemap 监控
  - `/news`  手动触发关键词汇总
- 机器人会在有更新时自动推送消息到你配置的 Telegram 频道或群组。
- 支持静默模式，无更新时不打扰。

【图片占位：Telegram 交互命令与推送截图】

## 五、注意事项

- 监控频率建议根据实际需求调整，避免对目标网站造成压力。
- 免费额度下，建议监控站点数量 < 50，单个 sitemap 文件 < 1MB。

## 五、常见问题与优化建议

- **初始化失败**：检查环境变量和 KV 命名空间配置。
- **推送失败**：确认 Bot Token 和目标频道/用户 ID 是否正确。
- **定时任务不执行**：检查 cron 表达式和部署状态。
- **优化建议**：减少请求频率、合理分配监控站点、优化 sitemap 文件大小。

---

如需源码或有疑问，欢迎留言交流，或关注[项目仓库](https://github.com/Yangjia23/sitemap-diff)获取最新进展！


